{% extends 'wardrobe/base.html' %}

{% block title %}Создать образ - GoodChoice{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-8">
        <div class="card mb-4">
            <div class="card-header bg-success text-white">
                <h3 class="mb-0"><i class="bi bi-stars"></i> Создать новый образ</h3>
            </div>
            
            <div class="card-body">
                <form method="post" id="outfitForm">
                    {% csrf_token %}
                    
                    <div class="mb-4">
                        <label for="{{ form.name.id_for_label }}" class="form-label fw-bold">
                            <i class="bi bi-tag"></i> Название образа
                        </label>
                        {{ form.name }}
                        <div class="form-text">Например: "Офисный образ на понедельник"</div>
                    </div>
                    
                    <div class="mb-4">
                        <label for="{{ form.description.id_for_label }}" class="form-label fw-bold">
                            <i class="bi bi-card-text"></i> Описание
                        </label>
                        {{ form.description }}
                        <div class="form-text">Необязательно. Можно указать особенности образа</div>
                    </div>
                    
                    <div class="mb-4">
                        <label for="{{ form.items.id_for_label }}" class="form-label fw-bold">
                            <i class="bi bi-closet"></i> Вещи в образе
                        </label>
                        {{ form.items }}
                        <div class="form-text">Удерживайте Ctrl (Cmd на Mac) для выбора нескольких вещей</div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <label for="{{ form.occasion.id_for_label }}" class="form-label fw-bold">
                                <i class="bi bi-calendar-event"></i> Тип мероприятия
                            </label>
                            {{ form.occasion }}
                        </div>
                        
                        <div class="col-md-6 mb-4">
                            <label for="{{ form.rating.id_for_label }}" class="form-label fw-bold">
                                <i class="bi bi-star"></i> Оценка образа
                            </label>
                            {{ form.rating }}
                        </div>
                    </div>
                    
                    <div class="d-flex justify-content-between mt-4">
                        <a href="{% url 'wardrobe:outfit_list' %}" class="btn btn-outline-secondary">
                            <i class="bi bi-arrow-left"></i> Назад к образам
                        </a>
                        <div>
                            <button type="reset" class="btn btn-outline-danger me-2">
                                <i class="bi bi-x-circle"></i> Очистить
                            </button>
                            <button type="submit" class="btn btn-success">
                                <i class="bi bi-check-circle"></i> Сохранить образ
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Правая колонка - советы -->
    <div class="col-lg-4">
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0"><i class="bi bi-lightbulb"></i> Советы по созданию образов</h5>
            </div>
            <div class="card-body">
                <h6>Базовые сочетания:</h6>
                <ul class="small mb-3">
                    <li><strong>Офис:</strong> Верх + Низ + Обувь</li>
                    <li><strong>Повседневный:</strong> Верх + Низ + Обувь + Аксессуар</li>
                    <li><strong>Вечерний:</strong> Платье + Обувь + Украшения</li>
                </ul>
                
                <h6>Цветовые правила:</h6>
                <ul class="small mb-0">
                    <li>Сочетайте не более 3-х основных цветов</li>
                    <li>Нейтральные цвета (черный, белый, бежевый) сочетаются со всем</li>
                    <li>Один яркий акцент лучше нескольких</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.getElementById('outfitForm').addEventListener('submit', function(e) {
        const nameField = document.getElementById('{{ form.name.id_for_label }}');
        const itemsField = document.getElementById('{{ form.items.id_for_label }}');
        
        if (nameField.value.trim().length < 2) {
            e.preventDefault();
            alert('Название образа должно содержать хотя бы 2 символа');
            nameField.focus();
            return;
        }
        
        if (itemsField.selectedOptions.length === 0) {
            e.preventDefault();
            alert('Выберите хотя бы одну вещь для образа');
            itemsField.focus();
            return;
        }
    });
</script>
{% endblock %}